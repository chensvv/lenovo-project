webpackJsonp([4],{"CuQ+":function(e,t,r){e.exports=r.p+"static/img/login1.bffddf7.png"},Luci:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("mvHQ"),i=r.n(o),s=r("woOf"),a=r.n(s),n=r("iGF/"),l=r("krqS"),g=r("PXCl").Base64,m={data:function(){return{limgCode:"",uuid:"",loginForm:{username:"",password:"",imgCode:""},regForm:{username:"",password:"",regCode:""},loginShow:!0,loginLoading:!1,regLoading:!1,loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],imgCode:[{required:!0,message:"请输入验证码",trigger:"change"}]},regRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,validator:function(e,t,r){""===t?r(new Error("请输入密码")):r()},trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,message:"密码限制8-16字符且必须包含大小写英文及数字",trigger:"blur"}],regCode:[{required:!0,message:"请输入验证码",trigger:"blur"}]},menu:[]}},created:function(){this.getImgCode()},methods:{loginSubmit:function(e){var t=this,r={userName:this.loginForm.username,password:this.loginForm.password,imgCode:this.loginForm.imgCode,ucode:this.uuid},o={userName:this.loginForm.username};r.sign=Object(l.a)(r),o.sign=Object(l.a)(o),this.$refs[e].validate(function(e){if(!e)return!1;t.loginLoading=!0,Object(n.l)(r).then(function(e){if(200==e.data.code){sessionStorage.setItem("username",g.encode(t.loginForm.username));var r={t:g.encode(e.data.data)},s=a()(r,{startTime:(new Date).getTime()});sessionStorage.setItem("token",i()(s)),Object(n.A)(o).then(function(e){sessionStorage.setItem("menuData",i()(e.data.data)),t.$router.push("/")}),t.loginLoading=!1}else t.getImgCode(),t.$message({message:e.data.errorMessage,type:"error",duration:1e3}),t.loginLoading=!1}).catch(function(e){t.getImgCode(),t.loginLoading=!1})})},regSubmit:function(e){var t=this,r={userName:this.regForm.username,password:this.regForm.password,imgCode:this.regForm.regCode,ucode:this.uuid};r.sign=Object(l.a)(r),this.$refs[e].validate(function(e){if(!e)return!1;Object(n.B)(r).then(function(e){200==e.data.code?(t.$message({message:"注册成功，请登录",type:"success",duration:1e3}),t.loginShow=!t.loginShow):(t.getImgCode(),t.$message({message:e.data.errorMessage,type:"error",duration:1e3}))}).catch(function(e){t.getImgCode(),t.$message({message:"服务器错误，请稍后重试！",type:"error",duration:1e3})})})},getImgCode:function(){var e=this;Object(n.k)().then(function(t){e.limgCode="data:image/png;base64,"+t.data.data.imgage,e.uuid=t.data.data.uuid})},register:function(){this.getImgCode(),this.loginShow=!this.loginShow}}},u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[e._m(0),e._v(" "),r("div",{staticClass:"login-box"},[e.loginShow?r("div",{staticClass:"loginn"},[r("span",{staticClass:"form-title"},[e._v("联想语音管理系统")]),e._v(" "),r("el-form",{ref:"loginForm",attrs:{"label-position":"left",model:e.loginForm,rules:e.loginRules},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{attrs:{type:"text",placeholder:"用户名","prefix-icon":"el-icon-user","auto-complete":"off",clearable:""},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username","string"==typeof t?t.trim():t)},expression:"loginForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"密码","prefix-icon":"el-icon-lock","auto-complete":"off",clearable:""},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"==typeof t?t.trim():t)},expression:"loginForm.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"imgcode-item",attrs:{prop:"imgCode"}},[r("el-input",{attrs:{type:"text",placeholder:"验证码","auto-complete":"off",clearable:""},model:{value:e.loginForm.imgCode,callback:function(t){e.$set(e.loginForm,"imgCode","string"==typeof t?t.trim():t)},expression:"loginForm.imgCode"}}),e._v(" "),r("img",{staticClass:"img",attrs:{src:e.limgCode},on:{click:function(t){return e.getImgCode()}}})],1),e._v(" "),r("el-form-item",{staticClass:"btn_item"},[r("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.loginLoading},on:{click:function(t){return e.loginSubmit("loginForm")}}},[e._v("登录")]),e._v(" "),r("span",{staticClass:"register_btn",attrs:{"native-type":"submit"},on:{click:function(t){return e.register()}}},[e._v("注册")])],1)],1)],1):r("div",{key:"register",staticClass:"register"},[r("span",{staticClass:"form-title"},[e._v("联想语音管理系统")]),e._v(" "),r("el-form",{ref:"regForm",attrs:{"label-position":"left",model:e.regForm,rules:e.regRules},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{prop:"username"}},[r("el-input",{staticStyle:{position:"fixed",bottom:"-9999px"}}),e._v(" "),r("el-input",{attrs:{type:"text",placeholder:"请输入用户名","prefix-icon":"el-icon-user","auto-complete":"off",clearable:""},model:{value:e.regForm.username,callback:function(t){e.$set(e.regForm,"username","string"==typeof t?t.trim():t)},expression:"regForm.username"}})],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{staticStyle:{position:"fixed",bottom:"-9999px"}}),e._v(" "),r("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"el-icon-lock","auto-complete":"off",clearable:""},model:{value:e.regForm.password,callback:function(t){e.$set(e.regForm,"password","string"==typeof t?t.trim():t)},expression:"regForm.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"imgcode-item",attrs:{prop:"regCode"}},[r("el-input",{attrs:{type:"text",placeholder:"验证码","auto-complete":"off",clearable:""},model:{value:e.regForm.regCode,callback:function(t){e.$set(e.regForm,"regCode","string"==typeof t?t.trim():t)},expression:"regForm.regCode"}}),e._v(" "),r("img",{staticClass:"img",attrs:{src:e.limgCode},on:{click:function(t){return e.getImgCode()}}})],1),e._v(" "),r("el-form-item",{staticClass:"btn_item"},[r("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.regLoading},on:{click:function(t){return e.regSubmit("regForm")}}},[e._v("注册")]),e._v(" "),r("span",{staticClass:"register_btn",attrs:{"native-type":"submit"},on:{click:function(t){return e.register()}}},[e._v("登录")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login_background"},[t("img",{attrs:{src:r("CuQ+"),alt:""}})])}]};var c=r("VU/8")(m,u,!1,function(e){r("OqF8")},"data-v-7bd3a8ae",null);t.default=c.exports},OqF8:function(e,t){}});