webpackJsonp([6],{"CuQ+":function(e,r,t){e.exports=t.p+"static/img/login1.bffddf7.png"},J8Hy:function(e,r){},Luci:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("mvHQ"),i=t.n(o),s=t("woOf"),a=t.n(s),n=t("iGF/"),g=t("krqS"),l=t("PXCl").Base64,m={data:function(){var e=this;return{limgCode:"",uuid:"",loginUserErr:"",loginPsdErr:"",loginImgCodeErr:"",regUserErr:"",regCodeErr:"",loginForm:{username:"",password:"",imgCode:""},regForm:{username:"",password:"",regCode:""},loginShow:!0,loginLoading:!1,regLoading:!1,loginRules:{username:[{required:!0,message:"请输入用户名",trigger:"change"}],password:[{required:!0,validator:function(r,t,o){""===t?o(new Error("请输入密码")):(e.loginPsdErr="",o())},trigger:"change"}],imgCode:[{required:!0,validator:function(r,t,o){""===t?o(new Error("请输入验证码")):(e.loginImgCodeErr="",o())},trigger:"change"}]},regRules:{username:[{required:!0,validator:function(r,t,o){""===t?o(new Error("请输入用户名")):(e.regUserErr="",o())},trigger:"change"}],password:[{required:!0,validator:function(e,r,t){""===r?t(new Error("请输入密码")):t()},trigger:"change"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,message:"密码限制8-16字符且必须包含大小写英文及数字",trigger:"blur"}],regCode:[{required:!0,validator:function(r,t,o){""===t?o(new Error("请输入验证码")):(e.regCodeErr="",o())},trigger:"change"}]},menu:[]}},created:function(){this.getImgCode()},methods:{loginSubmit:function(e){var r=this,t={userName:this.loginForm.username,password:this.loginForm.password,imgCode:this.loginForm.imgCode,ucode:this.uuid},o={userName:this.loginForm.username};t.sign=Object(g.a)(t),o.sign=Object(g.a)(o),this.$refs[e].validate(function(e){if(!e)return!1;r.loginLoading=!0,Object(n.l)(t).then(function(e){if(r.loginLoading=!1,200==e.data.code){sessionStorage.setItem("username",l.encode(r.loginForm.username));var t={t:l.encode(e.data.data)},s=a()(t,{startTime:(new Date).getTime()});sessionStorage.setItem("token",i()(s)),Object(n.A)(o).then(function(e){sessionStorage.setItem("menuData",i()(e.data.data)),r.$router.push("/")})}else 400==e.data.code?(r.getImgCode(),r.loginPsdErr=e.data.errorMessage):(r.getImgCode(),r.loginImgCodeErr=e.data.errorMessage)}).catch(function(e){r.getImgCode()})})},regSubmit:function(e){var r=this,t={userName:this.regForm.username,password:this.regForm.password,imgCode:this.regForm.regCode,ucode:this.uuid};t.sign=Object(g.a)(t),this.$refs[e].validate(function(e){if(!e)return!1;r.regLoading=!0,Object(n.B)(t).then(function(e){r.regLoading=!1,200==e.data.code?(r.$message({message:"注册成功，请登录",type:"success",duration:2e3}),r.loginShow=!r.loginShow):400==e.data.code?(r.getImgCode(),r.regUserErr=e.data.errorMessage):(r.getImgCode(),r.regCodeErr=e.data.errorMessage)}).catch(function(e){r.getImgCode(),r.$message({message:"服务器错误，请稍后重试！",type:"error",duration:2e3})})})},getImgCode:function(){var e=this;Object(n.k)().then(function(r){e.limgCode="data:image/png;base64,"+r.data.data.imgage,e.uuid=r.data.data.uuid})},register:function(){this.getImgCode(),this.loginShow=!this.loginShow}}},c={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[e._m(0),e._v(" "),t("div",{staticClass:"login-box"},[e.loginShow?t("div",{staticClass:"loginn"},[t("span",{staticClass:"form-title"},[e._v("联想语音管理系统")]),e._v(" "),t("el-form",{ref:"loginForm",attrs:{"label-position":"left",model:e.loginForm,rules:e.loginRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{prop:"username",error:e.loginUserErr}},[t("el-input",{attrs:{type:"text",placeholder:"用户名","prefix-icon":"el-icon-user","auto-complete":"off",clearable:""},model:{value:e.loginForm.username,callback:function(r){e.$set(e.loginForm,"username","string"==typeof r?r.trim():r)},expression:"loginForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password",error:e.loginPsdErr}},[t("el-input",{attrs:{type:"password",placeholder:"密码","prefix-icon":"el-icon-lock","auto-complete":"off",clearable:""},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password","string"==typeof r?r.trim():r)},expression:"loginForm.password"}})],1),e._v(" "),t("el-form-item",{staticClass:"imgcode-item",attrs:{prop:"imgCode",error:e.loginImgCodeErr}},[t("el-input",{attrs:{type:"text",placeholder:"验证码","auto-complete":"off",clearable:""},model:{value:e.loginForm.imgCode,callback:function(r){e.$set(e.loginForm,"imgCode","string"==typeof r?r.trim():r)},expression:"loginForm.imgCode"}}),e._v(" "),t("img",{staticClass:"img",attrs:{src:e.limgCode},on:{click:function(r){return e.getImgCode()}}})],1),e._v(" "),t("el-form-item",{staticClass:"btn_item"},[t("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.loginLoading},on:{click:function(r){return e.loginSubmit("loginForm")}}},[e._v("登录")]),e._v(" "),t("span",{staticClass:"register_btn",attrs:{"native-type":"submit"},on:{click:function(r){return e.register()}}},[e._v("注册")])],1)],1)],1):t("div",{key:"register",staticClass:"register"},[t("span",{staticClass:"form-title"},[e._v("联想语音管理系统")]),e._v(" "),t("el-form",{ref:"regForm",attrs:{"label-position":"left",model:e.regForm,rules:e.regRules},nativeOn:{submit:function(e){e.preventDefault()}}},[t("el-form-item",{attrs:{prop:"username",error:e.regUserErr}},[t("el-input",{staticStyle:{position:"fixed",bottom:"-9999px"}}),e._v(" "),t("el-input",{attrs:{type:"text",placeholder:"请输入用户名","prefix-icon":"el-icon-user","auto-complete":"off",clearable:""},model:{value:e.regForm.username,callback:function(r){e.$set(e.regForm,"username","string"==typeof r?r.trim():r)},expression:"regForm.username"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{staticStyle:{position:"fixed",bottom:"-9999px"}}),e._v(" "),t("el-input",{attrs:{placeholder:"请输入密码","prefix-icon":"el-icon-lock","auto-complete":"off",clearable:""},model:{value:e.regForm.password,callback:function(r){e.$set(e.regForm,"password","string"==typeof r?r.trim():r)},expression:"regForm.password"}})],1),e._v(" "),t("el-form-item",{staticClass:"imgcode-item",attrs:{prop:"regCode",error:e.regCodeErr}},[t("el-input",{attrs:{type:"text",placeholder:"验证码","auto-complete":"off",clearable:""},model:{value:e.regForm.regCode,callback:function(r){e.$set(e.regForm,"regCode","string"==typeof r?r.trim():r)},expression:"regForm.regCode"}}),e._v(" "),t("img",{staticClass:"img",attrs:{src:e.limgCode},on:{click:function(r){return e.getImgCode()}}})],1),e._v(" "),t("el-form-item",{staticClass:"btn_item"},[t("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.regLoading},on:{click:function(r){return e.regSubmit("regForm")}}},[e._v("注册")]),e._v(" "),t("span",{staticClass:"register_btn",attrs:{"native-type":"submit"},on:{click:function(r){return e.register()}}},[e._v("登录")])],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"login_background"},[r("img",{attrs:{src:t("CuQ+"),alt:""}})])}]};var d=t("VU/8")(m,c,!1,function(e){t("J8Hy")},"data-v-434df078",null);r.default=d.exports}});