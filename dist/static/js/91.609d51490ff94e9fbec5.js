webpackJsonp([91],{"86P0":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("iGF/"),a=s("krqS"),o=s("PXCl").Base64,n={data:function(){var e=this;return{checkForm:{oldpass:"",newpass:"",checkPass:""},userinfo:[],regLoading:!1,regRules:{oldpass:[{required:!0,message:"请输入原密码",trigger:"blur"}],newpass:[{required:!0,validator:function(e,t,s){""===t?s(new Error("请输入密码")):s()},trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[^]{8,16}$/,message:"密码限制8-16字符且必须包含大小写英文及数字",trigger:"blur"}],checkPass:[{required:!0,validator:function(t,s,r){""===s?r(new Error("请输入密码")):s!==e.checkForm.newpass?r(new Error("两次密码输入不一致")):r()},trigger:"blur"}]}}},created:function(){this.getQueryOne()},methods:{regSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.regLoading=!0;var s={userId:t.userinfo.id,userName:o.decode(sessionStorage.getItem("username")),oldpassword:t.checkForm.oldpass,newpassword:t.checkForm.newpass};s.sign=Object(a.a)(s),Object(r.s)(s).then(function(e){t.regLoading=!1,200==e.data.code?t.$message({message:"修改密码成功，请重新登录",type:"success",duration:2e3,onClose:function(){t.logoutMethod(),sessionStorage.clear(),t.$router.push("/login")}}):t.$message({message:e.data.errorMessage,type:"error",duration:2e3})})}})},logoutMethod:function(){Object(r.i)().then(function(e){})},getQueryOne:function(){var e=this,t={userName:o.decode(sessionStorage.getItem("username"))};t.sign=Object(a.a)(t),Object(r.u)(t).then(function(t){e.userinfo=t.data.data.user})},getImgCode:function(){var e=this;Object(r.g)().then(function(t){e.limgCode="data:image/png;base64,"+t.data.data.imgage,e.uuid=t.data.data.uuid})}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"reg-box"},[s("h1",[e._v("修改密码")]),e._v(" "),s("el-form",{ref:"checkForm",attrs:{"label-position":"left",model:e.checkForm,rules:e.regRules},nativeOn:{submit:function(e){e.preventDefault()}}},[s("el-form-item",{attrs:{prop:"oldpass"}},[s("el-input",{staticClass:"code-input",attrs:{type:"text",placeholder:"请输入原密码","prefix-icon":"el-icon-user",autocomplete:"off",clearable:""},model:{value:e.checkForm.oldpass,callback:function(t){e.$set(e.checkForm,"oldpass","string"==typeof t?t.trim():t)},expression:"checkForm.oldpass"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"newpass"}},[s("el-input",{staticClass:"code-input",attrs:{type:"text",placeholder:"请输入新密码","prefix-icon":"el-icon-lock",autocomplete:"off",clearable:""},model:{value:e.checkForm.newpass,callback:function(t){e.$set(e.checkForm,"newpass","string"==typeof t?t.trim():t)},expression:"checkForm.newpass"}})],1),e._v(" "),s("el-form-item",{attrs:{prop:"checkPass"}},[s("el-input",{staticClass:"code-input",attrs:{type:"text",placeholder:"确认密码","prefix-icon":"el-icon-lock",autocomplete:"off",clearable:""},model:{value:e.checkForm.checkPass,callback:function(t){e.$set(e.checkForm,"checkPass","string"==typeof t?t.trim():t)},expression:"checkForm.checkPass"}})],1),e._v(" "),s("el-form-item",{staticClass:"btn_item"},[s("el-button",{attrs:{type:"primary","native-type":"submit",loading:e.regLoading},on:{click:function(t){return e.regSubmit("checkForm")}}},[e._v("确认")])],1)],1)],1)])},staticRenderFns:[]},i=s("VU/8")(n,c,!1,null,null,null);t.default=i.exports}});