<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta http-equiv="Imagetoolbar" content="no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"  /> 
    <title i18n="i18n.title">服务信息</title>
    <link rel="icon" href="https://voice.lenovomm.com/voicePlatform/welcome/images/favicon.ico" type="image/x-icon" />
    <link href="https://voice.lenovomm.com/voicePlatform/welcome/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://voice.lenovomm.com/voicePlatform/forum/css/head.css" rel="stylesheet" type="text/css" />
    <link href="https://voice.lenovomm.com/voicePlatform/welcome/css/animate.min.css" rel="stylesheet">	
    <link href="https://voice.lenovomm.com/voicePlatform/forum/css/popup.css" rel="stylesheet">	
    <link href="https://voice.lenovomm.com/voicePlatform/forum/css/service.css" rel="stylesheet"/>
    <link href="https://voice.lenovomm.com/voicePlatform/welcome/css/all.css" rel="stylesheet" >
    <script src="https://voice.lenovomm.com/voicePlatform/welcome/js/jquery-3.2.1.min.js"></script>
    <script src="https://voice.lenovomm.com/voicePlatform/welcome/js/bootstrap.min.js"></script>
    <script src="https://voice.lenovomm.com/voicePlatform/forum/js/jquery.base64.js"></script>
    <script src="https://voice.lenovomm.com/voicePlatform/forum/js/popup.js"></script>
    <script src="https://voice.lenovomm.com/voicePlatform/welcome/js/jquery.i18n.js"></script>
    <script src="https://voice.lenovomm.com/voicePlatform/welcome/js/com.js"></script>
    <style>
     #eui-main-footer{
        position: fixed;
        bottom: 0;
    }
    .logo_text{
        width: 56px !important;
        padding-left:1px; 
    }
    
    </style>
</head>
<body>
        <div class="nav-title">
                <nav class="navbar navbar-default navbar-inverse navbar-fixed-top" role="navigation">
                        <div class='container'>
                            <div class='navbar-header'>
                                <button type='button' onclick='open_nav()' class='navbar-toggle collapsed'>
                                    <span class='sr-only'>Toggle navigation</span>
                                    <span class='icon-bar'></span>
                                    <span class='icon-bar'></span>
                                    <span class='icon-bar'></span>
                                </button>
                                <div class='navbar-icon'>
                                    <img src='https://voice.lenovomm.com/voicePlatform/welcome/images/logo_img.png' alt=''>
                                    <span class='logo_text_left' i18n='i18n.writ'>联想语音</span>
                                </div>
                                <ul class='nav navbar-nav navbar-right mobile_nav_right' id='right_mobile'>
                                    <li id='login1'>
                                        <div id="munull">
                                            <a href="javascript:void(0);" onclick='user_login()' target='_self' id='lenovo-user-name_m'
                                                i18n='i18n.signIn'>登录</a>
                                        </div>
                                        <div id="muyes">
                                            <a href="javascript:void(0);" target='_self' class='mobile_top_username'><span class='user_name mo'
                                                    id="musername"></span><span class='open_user'></span></a>
                                            <ul class=' open_style' style='display:none'>
                                                <li><a href="javascript:void(0);" onclick='user_info()' i18n='i18n.devInfo'>服务信息</a></li>
                                                <li class='mobile_border2'><a href="javascript:void(0);" onclick='set_pwd()'
                                                        i18n='i18n.changePass'>修改密码</a></li>
                                                <li><a href="javascript:void(0);" onclick='user_logout()' i18n='i18n.signOut'>退出</a></li>
                                            </ul>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <div id='navbar' class='collapse navbar-collapse animated'>
                                <div class='is_mobile_close'>
                                    <span onclick='close_mobile_nav()' class='close_btn'></span>
                                </div>
                                <ul class='nav navbar-nav nav-left hover-menu'>
                                    <li>
                                        <a href="javascript:void(0);" onclick='menu_first_page()' target='_self'><span
                                                i18n='i18n.homepage'>首页</span><span class='mobile_jt'></span></a>
                                    </li>
                                    <li class="pro-li">
                                        <a href="javascript:void(0);" target='_self' id='pro-control' class='product'><span
                                                i18n='i18n.product'>产品服务</span><span class="caret"></span></a>
                                        <ul class='product-menu' id='pro-ul'>
                                            <li class='mobile_border'><a href="javascript:void(0);" onclick='menu_voice_recognise()' id='second'
                                                    i18n='i18n.shortSpeech'>短语音识别</a></li>
                                            <li class='mobile_border'><a href="javascript:void(0);" onclick='menu_voice_longrecognise()' id=''
                                                    i18n='i18n.realtime'>长语音识别</a></li>
                                            <li class='mobile_border'><a href="javascript:void(0);" onclick='menu_voice_tts()' id=''
                                                    i18n='i18n.synthesis'>语音合成 </a></li>
                                            <li class='mobile_border'><a href="javascript:void(0);" onclick='menu_voice_assess()' id=''
                                                    i18n='i18n.assess'>英语评测 </a></li>
                                        </ul>
                                    </li>
                                    <li class=''>
                                        <a href="javascript:void(0);" onclick='menu_product_document()' id='third' target='_self'><span
                                                i18n='i18n.document'>开发资源</span> <span class='mobile_jt'></span></a>
                                    </li>
                                    <li class=''>
                                        <a href="javascript:void(0);" onclick='menu_new_data()' id='' target='_self'><span
                                                i18n='i18n.infor'>新闻资讯</span> <span class='mobile_jt'></span></a>
                                    </li>
                                    <li class=''>
                                        <a href="javascript:void(0);" onclick='menu_forum_list()' id='' target='_self'><span
                                                i18n='i18n.message'>给我留言</span> <span class='mobile_jt'></span></a>
                                    </li>
                                </ul>
                                
                                <ul class='nav navbar-nav navbar-right hover-menu'>
                                    <li id='login1' class='mobile_style'>
                                        <div id="unull" style="display:none;">
                                            <a href="javascript:void(0);" onclick='user_login()' target='_self' id='lenovo-user-name_m'
                                                i18n='i18n.signIn'>登录</a>
                                            <span class='shu'>|</span>
                                            <a href="javascript:void(0);" onclick='user_reg()' target='_self' id='lenovo-user-register'
                                                i18n='i18n.signUp'>注册</a>
                                        </div>
                                        <div id="uyes" style="display:none;">
                                            <a href="javascript:void(0);" target='_self' class='lenovo-user-name2' id='lenovo-user-name'><span
                                                    class='user_name ua' id="username"></span><span class='caret'></span></a>
                                            <ul class='user-menu' id='user-ul'>
                                                <li class='mobile_border2'><a href="javascript:void(0);" onclick='user_info()'
                                                        i18n='i18n.devInfo'>服务信息</a></li>
                                                <li class='mobile_border2'><a href="javascript:void(0);" onclick='set_pwd()'
                                                        i18n='i18n.changePass'>修改密码</a></li>
                                                <li class='mobile_border2'><a href="javascript:void(0);" onclick='user_logout()'
                                                        i18n='i18n.signOut'>退出</a></li>
                                            </ul>
                                        </div>
                                    </li>
                                </ul>
                                <div class='drop-down'>
                                        <div id='box'>
                                            <div id='b-m' class='b-m'>
                                                <img src='https://voice.lenovomm.com/voicePlatform/welcome/images/china.png' class='opimg' id='op-img'>
                                            </div>
                                        </div>
                                        <div id='down'>
                                            <ul class='phones'>
                                                <li><img src='https://voice.lenovomm.com/voicePlatform/welcome/images/china.png' class='opimg' id='op-img'> <span class='optxt' style="display:none;">简体中文</span></li>
                                                <li><img src='https://voice.lenovomm.com/voicePlatform/welcome/images/usa.png' class='opimg' id='op-img'> <span class='optxt' style="display:none;">English</span></li>
                                            </ul>
                                        </div>
                                    </div>
                            </div>
                        </div>
                    </nav>
                    <p class="recognise_title" i18n="i18n.message">服务信息</p>
                    <div class="bg_div"></div>
            </div>
            
        </div>
        <div class="eui-main-body">
                <div class="content-body">
                    <div class="con-title">请选择需要开通的服务</div>
                    <div class="con-main">
                        <div class="check-box">
                            <div class="form-group form-check">
                                <input type="checkbox" class="asrcheck" value="1" name="check" id="check-label-asr"><label for="check-label-asr">ASR (语音识别ASR)</label>
                            </div>
                            <div class="form-group form-check">
                                <input type="checkbox" class="ttscheck" value="2" name="check" id="check-label-tts"><label class="check-label-tts">TTS (语音合成TTS)</label>
                            </div>
                        </div>
                        <div class="key-box">
                            <span type="text" class="span1" onclick="handleClick('asr')">查看密钥</span>
                            <span type="text" class="span2" onclick="handleClick('tts')">查看密钥</span>
                        </div>
                    </div>
                    <button class="sub-btn" onclick="submit()">提交</button>
                </div>
            </div>
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                      <div class="modal-content">
                        <div class="modal-header">
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                            <div class="num">
                                <span>联想密钥(ak)：</span>
                                <span id="ak"></span>
                            </div>
                            <div class="num">
                                <span>安全密钥(sk)：</span>
                                <span id="sk"></span>
                            </div>
                            <div class="num ifasr">
                                <span>ASR今日访问总次数：</span>
                                <span id="totalASRAmount"></span>
                            </div>
                            <div class="num iftts">
                                <span>TTS今日访问总次数：</span>
                                <span id="totalTTSAmount"></span>
                            </div>
                            <div class="num ifasr">
                                <span>ASR今日剩余访问次数：</span>
                                <span id="remainASRAmount"></span>
                            </div>
                            <div class="num iftts">
                                <span>TTS今日剩余访问次数：</span>
                                <span id="remainTTSAmount"></span>
                            </div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="conf" data-dismiss="modal">确认</button>
                        </div>
                      </div>
                    </div>
                  </div>
            <div id="eui-main-footer" class="footer-bgcolor">
                    联想语音&nbsp;&nbsp;&nbsp;©&nbsp;&nbsp;版权所有&nbsp;&nbsp;1998－2015&nbsp;&nbsp;联想集团有限公司人工智能实验室&nbsp;&nbsp;京ICP备05000462
                    <a href="javascript:void(0);" class='about' i18n="i18n.contact" onclick='contact()'>联系我们</a>
            </div>
    



</body>
</html>

<script>
var checkList=[]
    $('.back_arrows').click(function(){
        history.back(-1)
    })
    if($(".title").val()==""||$(".text").val()==""){
                $('#send').attr('disabled','disabled');
                $('#send').addClass('No_send')
			}
    $('.title,.text').on("input propertychange" ,function(){
        if($(".title").val()!="" && $(".text").val()!=""){
                $("#send").removeAttr("disabled");
                $('#send').removeClass('No_send')
			}else if($(".title").val()=="" || $(".text").val()==""){
                $('#send').attr('disabled','disabled');
                $('#send').addClass('No_send')
            }
    })
    var username = localStorage.getItem('un')
    $('#username').html(hideStar(username))
    $('#musername').html(hideStar(username))
    if (username == '' || username == null || username == undefined) {
		$('#uyes').css('display', 'none')
		$('#unull').css('display', 'block')
		$('#muyes').css('display', 'none')
		$('#munull').css('display', 'block')
	} else {
		$('#uyes').css('display', 'block')
		$('#unull').css('display', 'none')
		$('#muyes').css('display', 'block')
		$('#munull').css('display', 'none')
    }

    if(localStorage.getItem('us') == 1 || localStorage.getItem('us') == 2){
            checkList.push(localStorage.getItem('us'))
            if(localStorage.getItem('us') == 1){
                $('.asrcheck').attr("checked","checked")
                $('.asrcheck').attr("disabled","true")
                $('.span1').css('display','block')
                $('.span2').css('display','none')
            }
            if(localStorage.getItem('us') == 2){
                $('.ttscheck').attr("checked","checked")
                $('.ttscheck').attr("disabled","true")
                $('.span1').css('display','none')
                $('.span2').css('display','block')
            }
        }else if(localStorage.getItem('us') == 3){
            checkList.push('1','2')
            $('.asrcheck').attr("checked","checked")
            $('.ttscheck').attr("checked","checked")
            $('.asrcheck').attr("disabled","true")
            $('.ttscheck').attr("disabled","true")
            $('.sub-btn').attr('disabled','true')
            $('.span1').css('display','block')
            $('.span2').css('display','block')
        }
    window.onresize = function(){
        if(document.body.clientWidth <=850) {
            $('#navbar').addClass('mobile-nav')
		}else{
            $('#navbar').removeClass('mobile-nav')
		}
}
    $(document).ready(function(){
		
		if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent) || document.body.clientWidth <=850) {
			$('.nav').removeClass('hover-menu')
			$('#pro-control').attr('data-toggle','dropdown')
			$('#pro-ul').removeClass('product-menu')
			$('#pro-ul').addClass('dropdown-menu')
			$('#user-ul').removeClass('user-menu')
			$('#user-ul').addClass('dropdown-menu')
            $('#lenovo-user-name').attr('data-toggle','dropdown')
            $('#navbar').addClass('mobile-nav')
		}else{
			$('.nav').addClass('hover-menu')
			$('#pro-control').removeAttr('data-toggle')
			$('#pro-ul').addClass('product-menu')
			$('#pro-ul').removeClass('dropdown-menu')
			$('#user-ul').addClass('user-menu')
			$('#user-ul').removeClass('dropdown-menu')
            $('#lenovo-user-name').removeAttr('data-toggle')
            $('#navbar').removeClass('mobile-nav')
		}
	})

	function open_nav() {
		$('#navbar').css({
			"display": "block"
        })
        $('#navbar').removeClass('mobile-nav')
		$('#navbar').removeClass("fadeOutUp")
		$('#navbar').addClass("fadeInDown")
		document.getElementById('navbar').addEventListener('touchmove', function (event) {
			event.preventDefault();
		})
	}

	function close_mobile_nav() {
		$('#navbar').removeClass("fadeInDown")
		$('#navbar').addClass("fadeOutUp")
		setTimeout(function () {
			$('#navbar').css({
				"display": "none"
			})
		}, 200)
    }
    function handleClick(val){
        $('#exampleModal').modal('show')
        if(val == 'asr'){
            $('.ifasr').css('display','block')
            $('.iftts').css('display','none')
        }else{
            $('.ifasr').css('display','none')
            $('.iftts').css('display','block')
        }
    }
    function fn(){}
    function submit(){
        var checkArr
            if($('.asrcheck').is(":checked") == true && $('.ttscheck').is(":checked") == true){
                checkArr = 3
            }else if($('.asrcheck').is(":checked") == false && $('.ttscheck').is(":checked") == false){
                checkArr = 0
            }else{
                if($('.asrcheck').is(":checked") == true && $('.ttscheck').is(":checked") == false){
                    checkArr = 1
                }
                if($('.asrcheck').is(":checked") == false && $('.ttscheck').is(":checked") == true){
                    checkArr = 2
                }
            }
            $.ajax({
			  type:"POST",
				url:'https://voice.lenovomm.com/website/web/updUserService',
				data:{
					t:window.localStorage.getItem('token'),
                    lid:$.base64.decode(window.localStorage.getItem('acd')),
                    language:getCookie('grycan.cn.bLang'),
                    userService:checkArr
				},
			  dataType:"json",
			  headers: {
			  	  "channel" : "cloudasr"
		       },
			  success:function(res){
					if(res.errorcode != 1024){
						if(res.status == 0){
                            window.localStorage.setItem('us',checkArr)
                            Popup.Nalert(res.error)
                        }if(res.status == 101){
                            Popup.confirm("登录超时，请重新登录", fn)
                        }else{
                            Popup.Nalert(res.error)
                        }
					}else{
						localStorage.clear();
						Popup.confirm("请登录后继续操作", fn)
					}
			  },error:function(err){
					
				}
			});
    }
    getUserInfo()
    function getUserInfo(){
        $.ajax({
            type:"POST",
            url:'https://voice.lenovomm.com/website/userinfo',
            data:{
                username:window.localStorage.getItem('un'),
                lenovoid:$.base64.decode(window.localStorage.getItem('acd')),
                t:localStorage.getItem('token')
            },
            dataType:"json",
            headers: {
                "channel" : "cloudasr"
            },
            success:function(res){
                if(res.errorcode != 1024){
                    $('#ak').html(res.lenovokey)
                    $('#sk').html(res.secretkey)
                    $('#totalASRAmount').html(res.totalASRAmount+'次')
                    $('#totalTTSAmount').html(res.totalTTSAmount+'次')
                    $('#remainASRAmount').html(res.remainASRAmount+'次')
                    $('#remainTTSAmount').html(res.remainTTSAmount+'次')
                }else{
                    localStorage.clear();
                    Popup.confirm("请登录后继续操作", fn)
                }
            },error:function(err){
                
            }
        });
    }
	function hideStar(str) {
		var phone = /^(?:(?:\+|00)86)?1[3-9]\d{9}$/
		var mail =
			/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
		if (mail.test(str)) {
			let index = localStorage.getItem('un').split("@")
			if (index[0].length < 4) {
				return str.substring(0, 1) + "****" + str.substring(str.indexOf('@'));
			} else {
				return str.substring(0, 3) + "****" + str.substring(str.indexOf('@'));
			}
		}
		if (phone.test(str)) {
			return str.substring(0, 4) + "****" + str.substr(str.length - 3);
		}
		if (!mail.test(str) || !phone.test(str)) {
			return str
		}
    }
    
    function menu_first_page() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/welcome/index.html";
	}

	function menu_voice_recognise() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/recognise.html";
	}

	function menu_voice_longrecognise() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/long_recognise.html";
	}

	function menu_voice_tts() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/tts.html";
	}

	function menu_voice_assess() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/assess.html";
	}

	function menu_voice_file() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/voicefile.html";
	}

	function menu_voice_synthesis() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/synthesis.html";
	}

	function menu_sdk_download() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/sdk/sdklist.html";
	}

	function menu_product_document() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/document/userDocument.html";
	}

	function menu_developer_question() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/forum/questionlist.html";
	}

	function menu_application_manager() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/application/applist.html";
	}

	function menu_user_register() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/user/userRegister.html";
	}

	function user_info() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/userinfo.html";
	}

	function set_pwd() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/login/setpwd.html";
	}

	function user_logout() {
		window.localStorage.clear();
		window.location.href = "https://voice.lenovomm.com/voicePlatform/login/login.html";
	}

	function user_login() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/login/login.html";
	}

	function user_reg() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/login/login.html?status=reg";
	}

	function menu_forum_list() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/forum/questionlist.html";
	}

	function menu_new_data() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/new/newlist.html";
	}
    function contact() {
		window.location.href = "https://voice.lenovomm.com/voicePlatform/product/contact.html";
	}
</script>